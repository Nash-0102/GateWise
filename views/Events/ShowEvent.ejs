<% layout('layouts/layout') %>
<% locals.title = eventData.title %>

<!-- Wrapper for Light Theme -->
<div class="bg-white min-h-screen text-slate-900 py-10 flex justify-center">
    <main class="w-full max-w-3xl px-4 sm:px-6">
        
        <div class="mb-6">
            <a href="/" class="inline-flex items-center gap-2 text-sm font-medium text-slate-500 hover:text-slate-800 transition-colors group">
                <svg class="w-4 h-4 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Back to Dashboard
            </a>
        </div>

        <!-- Details Container Card -->
        <div class="bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden">
            
            <!-- Card Header -->
            <div class="px-8 py-8 border-b border-slate-100 bg-gradient-to-r from-slate-50/50 to-white">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div>
                        <h1 class="text-3xl font-extrabold text-black tracking-tight mb-2">
                            <%= eventData.title %>
                        </h1>
                        <!-- Category Badge -->
                        <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-bold border
                            <%= eventData.category === 'Maintenance' ? 'bg-rose-50 text-rose-600 border-rose-100' : 
                               (eventData.category === 'Meeting' ? 'bg-amber-50 text-amber-600 border-amber-100' : 
                               'bg-blue-50 text-blue-600 border-blue-100') %>">
                            <%= eventData.category || 'General' %>
                        </span>
                    </div>
                    
                    <!-- Date Box -->
                    <div class="text-left md:text-right bg-white p-3 rounded-lg border border-slate-200 shadow-sm">
                        <p class="text-xs text-slate-500 uppercase tracking-wider font-bold mb-1">Scheduled Date</p>
                        <p class="text-lg font-mono text-slate-900 font-bold flex items-center gap-2">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            <%= eventData.date ? new Date(eventData.date).toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'long', day: 'numeric' }) : 'Date not set' %>
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Card Body -->
            <div class="p-8 bg-white">
                <h4 class="text-sm font-bold text-black uppercase tracking-wider mb-3">
                    Description / Topic
                </h4>
                <div class="prose prose-slate max-w-none text-slate-800 leading-relaxed text-base font-medium">
                    <p style="white-space: pre-wrap;"><%= eventData.description %></p>
                </div>
            </div>

            <!-- Card Footer with Actions -->
            <div class="bg-slate-50/50 px-8 py-6 border-t border-slate-100 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0">
                
                <!-- Back Link -->
                <a href="/events" class="text-sm font-medium text-slate-500 hover:text-slate-900 transition-colors flex items-center gap-2 group">
                    <svg class="w-4 h-4 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Back to Events
                </a>

                <!-- Action Buttons -->
                <div class="flex items-center space-x-4">
                    
                    <!-- Edit Button -->
                    <%if(currUser && currUser.role==="Secretary"){ %>
                        <a 
                        href="/events/<%= eventData._id %>/edit"
                        class="px-5 py-2.5 rounded-lg text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5"
                    >
                        Edit
                    </a>

                    <% } %>
                    
                    
                    <!-- Delete Button -->
                     <%if(currUser && currUser.role==="Secretary"){ %>
                    <form action="/events/<%= eventData._id %>?_method=DELETE" method="post" class="inline">
                        <button 
                            type="submit"
                            class="px-5 py-2.5 rounded-lg text-sm font-bold text-rose-600 hover:text-rose-700 bg-white border border-rose-200 hover:bg-rose-50 transition-all shadow-sm"
                            onclick="return confirm('Are you sure you want to delete this event?');"
                        >
                            Delete
                        </button>
                    </form>
                    <% } %>

                </div>
            </div>
        </div>

    </main>
</div>
