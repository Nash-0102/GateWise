<!-- Navigation Bar -->
<nav class="sticky top-0 z-50 w-full border-b border-slate-200/20 bg-white/10 backdrop-blur-md transition-all duration-300"
    id="main-navbar">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">

            <!-- Logo Section -->
            <div class="flex-shrink-0 flex items-center gap-2">
                <div
                    class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center shadow-sm shadow-blue-500/20 text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                        </path>
                    </svg>
                </div>
                <a href="/"
                    class="text-slate-800 text-xl font-bold tracking-tight hover:opacity-80 transition-opacity">GateWise</a>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden md:block">
                <div class="ml-10 flex items-center gap-1">

                    <!-- Common Links -->
                    <a href="/"
                        class="text-slate-600 hover:text-slate-900 hover:bg-slate-100/50 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200">Home</a>
                    <a href="/about"
                        class="text-slate-600 hover:text-slate-900 hover:bg-slate-100/50 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200">About</a>
                    <a href="/contact"
                        class="text-slate-600 hover:text-slate-900 hover:bg-slate-100/50 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200">Contact</a>
                    <a href="/profile"
                        class="text-slate-600 hover:text-slate-900 hover:bg-slate-100/50 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200">Profile</a>

                    <% if(currUser && currUser.role === "Secretary" ){ %>
                        <a href="/manage" class="text-slate-600 hover:text-indigo-700 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200">
                            Management
                        </a>
                    <% } %>

                    <div class="w-px h-5 bg-slate-300 mx-3"></div>

                    <!-- Auth Logic -->
                    <% if(!currUser) { %>

                        <a href="/login"
                            class="text-slate-600 hover:text-slate-900 font-medium px-3 py-2 rounded-md text-sm transition-colors">
                            Login
                        </a>

                        <a href="/signup"
                            class="group relative inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white transition-all duration-200 bg-slate-900 rounded-lg hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 ml-2 overflow-hidden">
                            <span
                                class="absolute inset-0 w-full h-full -mt-1 rounded-lg opacity-30 bg-gradient-to-b from-transparent via-transparent to-gray-700"></span>
                            <span class="relative">Sign Up</span>
                        </a>

                        <% } else { %>

                            <span class="text-slate-500 text-sm font-medium mr-4">
                                Hi, <%= currUser.username %>
                            </span>

                            <a href="/logout"
                                class="text-rose-600 hover:text-rose-700 border border-rose-200 hover:bg-rose-50 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200">
                                Logout
                            </a>

                            <% } %>

                </div>
            </div>

            <!-- Mobile Menu Button -->
            <div class="flex md:hidden">
                <button type="button" onclick="toggleMobileMenu()"
                    class="inline-flex items-center justify-center p-2 rounded-md text-slate-600 hover:text-slate-900 hover:bg-slate-100/50 focus:outline-none transition-colors">
                    <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu (Hidden by default) -->
    <div id="mobile-menu" class="hidden md:hidden border-t border-slate-200/50 bg-white/80 backdrop-blur-xl">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            <a href="/"
                class="text-slate-600 hover:text-slate-900 hover:bg-slate-50 block px-3 py-2 rounded-md text-base font-medium">Home</a>
            <a href="/about"
                class="text-slate-600 hover:text-slate-900 hover:bg-slate-50 block px-3 py-2 rounded-md text-base font-medium">About</a>
            <a href="/contact"
                class="text-slate-600 hover:text-slate-900 hover:bg-slate-50 block px-3 py-2 rounded-md text-base font-medium">Contact</a>
            <a href="/profile"
                class="text-slate-600 hover:text-slate-900 hover:bg-slate-50 block px-3 py-2 rounded-md text-base font-medium">Profilee</a>
             <% if(currUser && currUser.role === "Secretary" ){ %>
                        <a href="/manage" class="text-slate-600 hover:text-indigo-700 hover:bg-indigo-50 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 border border-transparent hover:border-indigo-100">
                            Management
                        </a>
                    <% } %>

                    <div class="border-t border-slate-200 my-2"></div>

                    <% if(!currUser) { %>
                        <a href="/login"
                            class="text-slate-600 hover:text-slate-900 hover:bg-slate-50 block px-3 py-2 rounded-md text-base font-medium">Login</a>
                        <a href="/signup"
                            class="text-blue-600 hover:text-blue-700 hover:bg-blue-50 block px-3 py-2 rounded-md text-base font-medium">Sign
                            Up</a>
                        <% } else { %>
                            <div class="px-3 py-2 text-sm text-slate-500">Signed in as <%= currUser.username %>
                            </div>
                            <a href="/logout"
                                class="text-rose-600 hover:text-rose-700 hover:bg-rose-50 block px-3 py-2 rounded-md text-base font-medium">Logout</a>
                            <% } %>
        </div>
    </div>
</nav>

<script>
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('hidden');
    }
</script>